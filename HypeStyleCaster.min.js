/*
Hype Style Caster 1.0.5
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(m){var p=0;return function(){return p<m.length?{done:!1,value:m[p++]}:{done:!0}}};$jscomp.arrayIterator=function(m){return{next:$jscomp.arrayIteratorImpl(m)}};$jscomp.makeIterator=function(m){var p="undefined"!=typeof Symbol&&Symbol.iterator&&m[Symbol.iterator];return p?p.call(m):$jscomp.arrayIterator(m)};
!1==="HypeStyleCaster"in window&&(window.HypeStyleCaster=function(){function m(a){var b=document.createElement("style");b.type="text/css";b.id=a;document.head.appendChild(b);return b}function p(a,b){return v[a]?v[a](b):b}function y(a){var b=document.createElement("div");b.style.cssText=a;return!!b.style.length}function E(a,b){-1===b.indexOf("transform")&&/top|left|right|bottom/.test(b)&&(b="transform: none; "+b);r.innerHTML+="#"+a+"{"+b.split(";").filter(function(e){return 0<e.trim().length}).map(function(e){return e+
(-1==e.indexOf("!important")?" !important;":";")}).join("")+"}"}function t(a){r.innerHTML=r.innerHTML.replace(new RegExp("#"+a+"{[^}]*}"),"")}function z(a){return Object.keys(a).map(function(b){return b.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})+": "+a[b]+";"}).join("")}function A(a){var b=a.match(/\((\w+)\)\s*(\w+)/);return b?[b[1],b[2],b[2]+"-"+b[1]]:[null,a,a]}function B(a,b){var e=b.indexOf(a);if(-1===e)return"";for(e+=a.length;"("!==b.charAt(e);)e++;e++;for(var q="";")"!==b.charAt(e);)q+=
b.charAt(e),e++;return q}function C(a,b){for(var e=b.querySelectorAll("*"),q=0;q<e.length;q++)for(var u=e[q],f=getComputedStyle(u),c=0;c<f.length;c++){var d=f[c];d.startsWith("--"+a)&&u.style.removeProperty(d)}}function D(a,b,e){function q(f,c){var d=b,k=c.getAttribute("data-cast-to-closest");k?d=c.closest(k)||d:(d=c.closest(".HYPE_document > .HYPE_scene")||d,(k=c.getAttribute("data-cast-to-target"))&&(d=d.querySelector(k)||basElm));k=c.style;var h=f.split(":");f=h[0];h=h[1]?h[1].split(",").map(function(w){return w.trim()}).filter(function(w){return w.length}):
["width","height"];for(var g=0;g<h.length;g++){var n=A(h[g]);if(k[n[1]]){var F=p(n[0],k[n[1]]);d.style.setProperty("--"+f+"-"+n[2],F);h.splice(g,1);g--}}if(k.transform)for(h=$jscomp.makeIterator(h),g=h.next();!g.done;g=h.next())if(g=A(g.value),n=B(g[1],k.transform))n=p(g[0],n),d.style.setProperty("--"+f+"-"+g[2],n)}x&&l.customDataForPreview?a.customData=Object.assign(a.customData,l.customDataForPreview||l.customData):l.customData&&(a.customData=Object.assign(a.customData,l.customData));(new MutationObserver(function(f){f.forEach(function(c){var d=
c.target.id,k=c.target.getAttribute("data-style-declaration")||"";if(l.allowStyleExpression){var h=c.target.getAttribute("data-style-expression"),g="";try{g=(new Function("customData","with(customData){ return "+h+"}"))(a.customData)}catch(n){console.error("%cHype Style Caster Error%c version "+HypeStyleCaster.version+"\n\n%creturn "+h+"%c\n\n"+n+"\n\n","font-size:12px; font-weight:bold","font-size:8px","min-height:40px;display: inline-block; padding: 10px; background-color: rgba(255,255,255,0.25); border: 1px solid lightgray; border-radius: 4px; font-family:Monospace; font-size:12px",
"font-size:11px",c.target)}g&&(k+=";"+g)}c=k;if(null===c)t(d);else try{y(c)?(t(d),E(d,c)):t(d)}catch(n){t(d)}})})).observe(b,{subtree:!0,attributes:!0,attributeFilter:["data-style-declaration","data-style-expression"]});var u=new MutationObserver(function(f){f.forEach(function(c){var d=c.target.getAttribute("data-cast-properties");d&&(c.oldValue&&"data-cast-to-closest"===c.attributeName&&C(d,b),q(d,c.target))})});(new MutationObserver(function(f){b.querySelectorAll("[data-cast-properties]").forEach(function(c){var d=
c.getAttribute("data-cast-properties");d&&(q(d,c),u.observe(c,{attributes:!0,attributeOldValue:!0,attributeFilter:["style","data-cast-properties","data-cast-to-closest","data-cast-to-target"]}))})})).observe(b,{childList:!0,subtree:!0});x||(a.setElementStyle=function(f,c){f&&c&&("object"==typeof c&&(c=z(c)),f.setAttribute("data-style-declaration",c))},l.allowStyleAction&&!0==="HypeActionEvents"in window&&(a.refreshStyleActions=function(f){f=f||a;f.querySelectorAll("[data-style-action]").forEach(function(c){var d=
c.getAttribute("data-style-action");d&&(d=a.triggerAction("return "+d,{element:c,event:e}))&&a.setElementStyle(c,d)})}))}var x=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch."),v={"int":parseInt,"float":parseFloat,string:function(a){return'"'+a+'"'}},l={allowStyleExpression:!0,allowStyleAction:!0},r=m("hype-style-caster");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:D});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",
callback:function(a,b,e){l.allowStyleAction&&!0==="HypeActionEvents"in window&&a.refreshStyleActions()}});x&&document.addEventListener("DOMContentLoaded",function(){D({customData:{}},document.body,null)});return{version:"1.0.5",setDefault:function(a,b){"object"==typeof a?l=a:l[a]=b},getDefault:function(a){return a?l[a]:l},isValidCSS:y,styleToString:z,createStyleSheet:m,parseTransform:B,removeStyleVariable:C,registerCastingFunction:function(a,b){v[a]=b},resolveCastingFunction:p}}());
