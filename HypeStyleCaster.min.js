/*
 Hype Style Caster 1.0.6
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(m){var q=0;return function(){return q<m.length?{done:!1,value:m[q++]}:{done:!0}}};$jscomp.arrayIterator=function(m){return{next:$jscomp.arrayIteratorImpl(m)}};$jscomp.makeIterator=function(m){var q="undefined"!=typeof Symbol&&Symbol.iterator&&m[Symbol.iterator];return q?q.call(m):$jscomp.arrayIterator(m)};
!1==="HypeStyleCaster"in window&&(window.HypeStyleCaster=function(){function m(a){var b=document.createElement("style");b.type="text/css";b.id=a;document.head.appendChild(b);return b}function q(a,b){return v[a]?v[a](b):b}function y(a){var b=document.createElement("div");b.style.cssText=a;return!!b.style.length}function F(a,b){-1===b.indexOf("transform")&&/top|left|right|bottom/.test(b)&&(b="transform: none; "+b);t.innerHTML+="#"+a+"{"+b.split(";").filter(function(e){return 0<e.trim().length}).map(function(e){return e+
(-1==e.indexOf("!important")?" !important;":";")}).join("")+"}"}function u(a){t.innerHTML=t.innerHTML.replace(new RegExp("#"+a+"{[^}]*}"),"")}function z(a){return Object.keys(a).map(function(b){return b.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})+": "+a[b]+";"}).join("")}function A(a){var b=a.match(/\((\w+)\)\s*(\w+)/);return b?[b[1],b[2],b[2]+"-"+b[1]]:[null,a,a]}function B(a,b){var e=b.indexOf(a);if(-1===e)return"";for(e+=a.length;"("!==b.charAt(e);)e++;e++;for(var r="";")"!==b.charAt(e);)r+=
b.charAt(e),e++;return r}function C(a,b){for(var e=b.querySelectorAll("*"),r=0;r<e.length;r++)for(var n=e[r],f=getComputedStyle(n),c=0;c<f.length;c++){var d=f[c];d.startsWith("--"+a)&&n.style.removeProperty(d)}}function D(a,b,e){function r(f,c){var d=b,k=c.getAttribute("data-cast-to-closest");k?d=c.closest(k)||d:(d=c.closest(".HYPE_document > .HYPE_scene")||d,(k=c.getAttribute("data-cast-to-target"))&&(d=d.querySelector(k)||basElm));k=c.style;var h=f.split(":");f=h[0];h=h[1]?h[1].split(",").map(function(w){return w.trim()}).filter(function(w){return w.length}):
["width","height"];for(var g=0;g<h.length;g++){var p=A(h[g]);if(k[p[1]]){var G=q(p[0],k[p[1]]);d.style.setProperty("--"+f+"-"+p[2],G);h.splice(g,1);g--}}if(k.transform)for(h=$jscomp.makeIterator(h),g=h.next();!g.done;g=h.next())if(g=A(g.value),p=B(g[1],k.transform))p=q(g[0],p),d.style.setProperty("--"+f+"-"+g[2],p)}var n=E[a.documentId()]={};x&&l.customDataForPreview?a.customData=Object.assign(a.customData,l.customDataForPreview||l.customData):l.customData&&(a.customData=Object.assign(a.customData,
l.customData));n.dataStyleObserver=new MutationObserver(function(f){f.forEach(function(c){var d=c.target.id,k=c.target.getAttribute("data-style-declaration")||"";if(l.allowStyleExpression){var h=c.target.getAttribute("data-style-expression"),g="";try{g=(new Function("customData","with(customData){ return "+h+"}"))(a.customData)}catch(p){console.error("%cHype Style Caster Error%c version "+HypeStyleCaster.version+"\n\n%creturn "+h+"%c\n\n"+p+"\n\n","font-size:12px; font-weight:bold","font-size:8px",
"min-height:40px;display: inline-block; padding: 10px; background-color: rgba(255,255,255,0.25); border: 1px solid lightgray; border-radius: 4px; font-family:Monospace; font-size:12px","font-size:11px",c.target)}g&&(k+=";"+g)}c=k;if(null===c)u(d);else try{y(c)?(u(d),F(d,c)):u(d)}catch(p){u(d)}})});n.dataStyleObserver.observe(b,{subtree:!0,attributes:!0,attributeFilter:["data-style-declaration","data-style-expression"]});n.updateTree=function(f){b.querySelectorAll("[data-cast-properties]").forEach(function(c){var d=
c.getAttribute("data-cast-properties");d&&(r(d,c),n.dataCastObserver.observe(c,{attributes:!0,attributeOldValue:!0,attributeFilter:["style","data-cast-properties","data-cast-to-closest","data-cast-to-target"]}))})};n.dataCastObserver=new MutationObserver(function(f){f.forEach(function(c){var d=c.target.getAttribute("data-cast-properties");d&&(c.oldValue&&"data-cast-to-closest"===c.attributeName&&C(d,b),r(d,c.target))})});n.treeObserver=new MutationObserver(n.updateTree);n.treeObserver.observe(b,{childList:!0,
subtree:!0});x||(a.setElementStyle=function(f,c){f&&c&&("object"==typeof c&&(c=z(c)),f.setAttribute("data-style-declaration",c))},l.allowStyleAction&&!0==="HypeActionEvents"in window&&(a.refreshStyleActions=function(f){f=f||a;f.querySelectorAll("[data-style-action]").forEach(function(c){var d=c.getAttribute("data-style-action");d&&(d=a.triggerAction("return "+d,{element:c,event:e}))&&a.setElementStyle(c,d)})}))}var x=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch."),v={"int":parseInt,
"float":parseFloat,string:function(a){return'"'+a+'"'}},l={allowStyleExpression:!0,allowStyleAction:!0},E={},t=m("hype-style-caster");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:D});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,b,e){E[a.documentId()].updateTree();l.allowStyleAction&&!0==="HypeActionEvents"in window&&a.refreshStyleActions()}});x&&document.addEventListener("DOMContentLoaded",
function(){D({customData:{},documentId:function(){return"ide"}},document.body,null)});return{version:"1.0.6",setDefault:function(a,b){"object"==typeof a?l=a:l[a]=b},getDefault:function(a){return a?l[a]:l},isValidCSS:y,styleToString:z,createStyleSheet:m,parseTransform:B,removeStyleVariable:C,registerCastingFunction:function(a,b){v[a]=b},resolveCastingFunction:q}}());
